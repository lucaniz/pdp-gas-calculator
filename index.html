<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PDP Gas Calculator â€“ Parameters</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      padding: 20px;
    }
    h2 {
      margin-top: 40px;
      color: #333;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      margin-bottom: 30px;
      background-color: #fff;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }
    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      font-size: 14px;
      text-align: left;
    }
    th {
      background-color: #eee;
    }
    .subsection {
      background-color: #dbeeff;
      font-weight: bold;
      text-align: center;
    }
    input[type="number"], select {
      padding: 5px;
      width: 100px;
    }
  </style>
</head>
<body>

  <h2>Parameters</h2>

  <!-- Gas Units Section -->
  <table>
    <tr>
      <td colspan="4" class="subsection">Gas Units</td>
    </tr>
    <tr>
      <th>Name</th>
      <th>Value</th>
    </tr>
    <tr>
      <td>100 roots</td>
      <td>140,000,000</td>
    </tr>
    <tr>
      <td>1000 roots</td>
      <td>150,000,000</td>
    </tr>
    <tr>
      <td>10000 roots</td>
      <td>160,000,000</td>
    </tr>
    <tr>
      <td>100000 roots</td>
      <td>170,000,000</td>
    </tr>
  </table>

  <!-- Base Fee Section -->
  <table>
    <tr>
      <td colspan="4" class="subsection">Base Fee</td>
    </tr>
    <tr>
      <th>Name</th>
      <th>Value</th>
    </tr>
    <tr>
      <td>High base fee (0.1 nanoFIL)</td>
      <td>0.0000000001</td>
    </tr>
    <tr>
      <td>Low base fee (100 attoFIL)</td>
      <td>1E-16</td>
    </tr>
    <tr>
      <td>Last 30days average</td>
      <td>5.56E-12</td>
    </tr>
  </table>

  <!-- Inputs Section -->
  <h2>Inputs</h2>
  <table>
    <tr>
      <th>Name</th>
      <th>Value</th>
    </tr>
    <tr>
      <td>Deal price per TiB per month (USD)</td>
      <td><input type="number" id="dealPrice" value="2" step="0.1" /></td>
    </tr>
    <tr>
      <td>FIL price (USD)</td>
      <td><input type="number" id="filPrice" value="3" step="0.1" /></td>
    </tr>
    <tr>
      <td>Number of roots</td>
      <td>
        <select id="roots">
          <option value="100">100</option>
          <option value="1000">1000</option>
          <option value="10000">10000</option>
          <option value="100000">100000</option>
        </select>
      </td>
    </tr>
    <tr>
      <td>ProofSet size (GiB)</td>
      <td><input type="number" id="proofSize" value="100" min="0.01" step="0.01" /></td>
    </tr>
    <tr>
      <td>Number of proofs in a day</td>
      <td><input type="number" id="proofsPerDay" value="1" min="1" /></td>
    </tr>
  </table>

  <!-- Internal Math Section -->
  <h2>Internal Math</h2>
  <table>
    <tr>
      <th>Name</th>
      <th>Value</th>
    </tr>
    <tr>
      <td>Reward per 24h per byte (USD)</td>
      <td><span id="rewardUSD"></span></td>
    </tr>
    <tr>
      <td>Reward per 24h per byte (FIL)</td>
      <td><span id="rewardFIL"></span></td>
    </tr>
    <tr>
      <td>Upper bound (5%), FIL</td>
      <td><span id="upperBound"></span></td>
    </tr>
    <tr>
      <td>Lower Bound (4%), FIL</td>
      <td><span id="lowerBound"></span></td>
    </tr>
    <tr>
      <td>1%, FIL</td>
      <td><span id="onePercent"></span></td>
    </tr>
  </table>

  <script>
    // Get elements
    const dealPrice = document.getElementById('dealPrice');
    const filPrice = document.getElementById('filPrice');
    const proofSize = document.getElementById('proofSize');
    const rewardUSD = document.getElementById('rewardUSD');
    const rewardFIL = document.getElementById('rewardFIL');
    const upperBound = document.getElementById('upperBound');
    const lowerBound = document.getElementById('lowerBound');
    const onePercent = document.getElementById('onePercent');

    // Update internal math on input change
    function updateInternalMath() {
      const dealPriceValue = parseFloat(dealPrice.value);
      const filPriceValue = parseFloat(filPrice.value);
      const proofSizeValue = parseFloat(proofSize.value);

      // Calculate Reward per 24h per byte (USD)
      const rewardPerByteUSD = dealPriceValue / (30 * Math.pow(2, 40));
      rewardUSD.textContent = rewardPerByteUSD.toFixed(10);

      // Calculate Reward per 24h per byte (FIL)
      const rewardPerByteFIL = rewardPerByteUSD / filPriceValue;
      rewardFIL.textContent = rewardPerByteFIL.toFixed(10);

      // Calculate Upper Bound (5%), FIL
      const upperBoundValue = 0.05 * (proofSizeValue * Math.pow(1024, 3)) * rewardPerByteFIL;
      upperBound.textContent = upperBoundValue.toFixed(10);

      // Calculate Lower Bound (4%), FIL
      const lowerBoundValue = 0.04 * (proofSizeValue * Math.pow(1024, 3)) * rewardPerByteFIL;
      lowerBound.textContent = lowerBoundValue.toFixed(10);

      // Calculate 1% (FIL)
      const onePercentValue = 0.01 * (proofSizeValue * Math.pow(1024, 3)) * rewardPerByteFIL;
      onePercent.textContent = onePercentValue.toFixed(10);
    }

    // Add event listeners for updates
    dealPrice.addEventListener('input', updateInternalMath);
    filPrice.addEventListener('input', updateInternalMath);
    proofSize.addEventListener('input', updateInternalMath);

    // Initialize
    updateInternalMath();
  </script>

</body>
</html>
